<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Form View - Placement Coordinator -->
    <record id="placement_coordinator_view_form" model="ir.ui.view">
        <field name="name">placement.coordinator.view.form</field>
        <field name="model">placement.coordinator</field>
        <field name="arch" type="xml">
            <form string="Placement Coordinator">
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="toggle_active" type="object" class="oe_stat_button" icon="fa-archive">
                            <field name="active" widget="boolean_button"
                                   options="{'terminology': 'archive'}"/>
                        </button>
                        <button class="oe_stat_button" type="object" name="action_placement_drive" icon="fa-calendar-check">
                            <field name="total_drives" widget="statinfo" string="Drives Managed"/>
                        </button>
                    </div>

                    <field name="image_1920" widget="image" class="oe_avatar"
                           options="{'preview_image': 'image_128'}"
                           readonly="1"/>

                    <div class="oe_title">
                        <label for="name" string="Coordinator Name"/>
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>

                    <group>
                        <group string="Coordinator Details">
                            <field name="faculty_id"
                                   options="{'no_create': True, 'no_create_edit': True}"/>
                            <field name="role" widget="radio"/>
                            <field name="department_id"/>
                        </group>
                        <group string="Contact Information">
                            <field name="email" widget="email"/>
                            <field name="phone" widget="phone"/>
                        </group>
                    </group>

                    <notebook>
                        <page string="Placement Drives Managed" name="drives">
                            <field name="drive_ids" nolabel="1">
                                <list string="Placement Drives">
                                    <field name="name"/>
                                    <field name="company_id"/>
                                    <field name="drive_date"/>
                                    <field name="job_title"/>
                                    <field name="ctc_min" widget="monetary"/>
                                    <field name="ctc_max" widget="monetary"/>
                                    <field name="total_applications"/>
                                    <field name="total_offers"/>
                                    <field name="state" widget="badge"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <!-- List View - Placement Coordinator -->
    <record id="placement_coordinator_view_list" model="ir.ui.view">
        <field name="name">placement.coordinator.view.list</field>
        <field name="model">placement.coordinator</field>
        <field name="arch" type="xml">
            <list string="Placement Coordinators"
                  default_order="name"
                  multi_edit="1"
                  sample="1">
                <field name="name"/>
                <field name="faculty_id" optional="show"/>
                <field name="role" widget="badge"
                       decoration-success="role == 'head'"
                       decoration-info="role == 'coordinator'"
                       decoration-warning="role == 'assistant'"/>
                <field name="department_id" optional="show"/>
                <field name="email" optional="show"/>
                <field name="phone" optional="show" widget="phone"/>
                <field name="total_drives" optional="show"/>
                <field name="active" widget="boolean_toggle" optional="hide"/>
            </list>
        </field>
    </record>

    <!-- Search View - Placement Coordinator -->
    <record id="placement_coordinator_view_search" model="ir.ui.view">
        <field name="name">placement.coordinator.view.search</field>
        <field name="model">placement.coordinator</field>
        <field name="arch" type="xml">
            <search string="Search Coordinators">
                <field name="name"/>
                <field name="faculty_id"/>
                <field name="department_id"/>
                <field name="role"/>

                <separator/>

                <filter name="filter_head" string="Head - Placement Cell"
                        domain="[('role', '=', 'head')]"/>
                <filter name="filter_coordinator" string="Placement Coordinator"
                        domain="[('role', '=', 'coordinator')]"/>
                <filter name="filter_assistant" string="Assistant Coordinator"
                        domain="[('role', '=', 'assistant')]"/>

                <separator/>

                <filter name="filter_has_drives" string="Has Managed Drives"
                        domain="[('total_drives', '&gt;', 0)]"/>
                <filter name="filter_no_drives" string="No Drives Managed"
                        domain="[('total_drives', '=', 0)]"/>

                <separator/>

                <filter name="filter_active" string="Active"
                        domain="[('active', '=', True)]"/>
                <filter name="filter_inactive" string="Inactive"
                        domain="[('active', '=', False)]"/>

                <group expand="0" string="Group By">
                    <filter name="group_by_role" string="Role"
                            context="{'group_by': 'role'}"/>
                    <filter name="group_by_department" string="Department"
                            context="{'group_by': 'department_id'}"/>
                </group>

                <searchpanel>
                    <field name="role" string="Role"
                           select="multi"
                           icon="fa-user-tie"/>
                    <field name="department_id" string="Department"
                           select="multi"
                           icon="fa-sitemap"/>
                </searchpanel>
            </search>
        </field>
    </record>

    <!-- Kanban View - Placement Coordinator -->
    <record id="placement_coordinator_view_kanban" model="ir.ui.view">
        <field name="name">placement.coordinator.view.kanban</field>
        <field name="model">placement.coordinator</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_mobile"
                    quick_create="false"
                    sample="1">
                <field name="id"/>
                <field name="name"/>
                <field name="faculty_id"/>
                <field name="role"/>
                <field name="department_id"/>
                <field name="email"/>
                <field name="phone"/>
                <field name="total_drives"/>
                <field name="active"/>
                <field name="image_128"/>

                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_card oe_kanban_global_click">
                            <div class="ribbon ribbon-top-right" t-if="!record.active.raw_value">
                                <span class="text-bg-danger">Archived</span>
                            </div>

                            <div class="oe_kanban_content">
                                <div class="o_kanban_record_top">
                                    <div class="o_kanban_record_headings">
                                        <div class="d-flex align-items-center mb-2">
                                            <img t-att-src="kanban_image('placement.coordinator', 'image_128', record.id.raw_value)"
                                                 class="o_kanban_image o_image_64_cover me-3"
                                                 alt="Coordinator Photo"/>
                                            <div class="flex-grow-1">
                                                <strong class="o_kanban_record_title">
                                                    <field name="name"/>
                                                </strong>
                                                <div class="text-muted" t-if="record.department_id.raw_value">
                                                    <i class="fa fa-sitemap"/> <field name="department_id"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="o_kanban_record_body mt-3">
                                    <div class="row mb-2">
                                        <div class="col-12">
                                            <div class="card text-white"
                                                 t-attf-class="{{record.role.raw_value == 'head' ? 'bg-success' : (record.role.raw_value == 'coordinator' ? 'bg-info' : 'bg-warning')}}">
                                                <div class="card-body p-2 text-center">
                                                    <h6 class="mb-0">
                                                        <i class="fa fa-user-tie"/> <field name="role"/>
                                                    </h6>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mb-2">
                                        <div class="col-12">
                                            <div class="card bg-primary text-white">
                                                <div class="card-body p-2">
                                                    <div class="d-flex align-items-center">
                                                        <i class="fa fa-id-badge fa-2x me-2"/>
                                                        <div>
                                                            <small>Faculty</small>
                                                            <div><strong><field name="faculty_id"/></strong></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mb-2">
                                        <div class="col-12">
                                            <div class="bg-light p-2 rounded text-center">
                                                <div class="text-success">
                                                    <i class="fa fa-calendar-check fa-lg"/>
                                                </div>
                                                <h6 class="mb-0"><field name="total_drives"/></h6>
                                                <small class="text-muted">Drives Managed</small>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mb-2" t-if="record.email.raw_value or record.phone.raw_value">
                                        <div class="col-12">
                                            <div class="card bg-secondary text-white">
                                                <div class="card-body p-2">
                                                    <h6 class="mb-1">
                                                        <i class="fa fa-address-book"/> Contact
                                                    </h6>
                                                    <small t-if="record.email.raw_value">
                                                        <i class="fa fa-envelope"/> <field name="email"/>
                                                    </small><br t-if="record.email.raw_value and record.phone.raw_value"/>
                                                    <small t-if="record.phone.raw_value">
                                                        <i class="fa fa-phone"/> <field name="phone"/>
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="o_kanban_record_bottom mt-2">
                                    <div class="oe_kanban_bottom_right">
                                        <field name="activity_ids" widget="kanban_activity"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Action -->
    <record id="action_placement_coordinator" model="ir.actions.act_window">
        <field name="name">Placement Coordinators</field>
        <field name="res_model">placement.coordinator</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="context">{'search_default_filter_active': 1, 'search_default_group_by_role': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Add Placement Coordinator
            </p>
            <p>
                Manage placement cell coordinators. Select faculty_id (Many2one to faculty.faculty,
                required, tracked, no-create). System shows related fields: name (from faculty_id.name,
                stored, readonly), email (from faculty_id.work_email, readonly, email widget), phone
                (from faculty_id.work_mobile, readonly, phone widget). Select role (3 options, required,
                tracked, radio widget): head (Head - Placement Cell - green success badge), coordinator
                (Placement Coordinator - blue info badge), assistant (Assistant Coordinator - yellow
                warning badge). Shows department_id (Many2one related from faculty_id.department_id,
                stored, readonly). View placement history: drive_ids (One2many to placement.drive, shows:
                name/company_id/drive_date/job_title/package/total_applications/total_offers/state with
                badge widget). View computed stats: total_drives (integer, computed, count drive_ids).
                Toggle active boolean (default true, archive button). Form view button box has 2 stat
                buttons: Archive (archive icon, boolean_button widget) and Drives Managed (calendar-check
                icon, statinfo widget showing total_drives). Coordinator photo (image_1920, readonly,
                inherited from faculty_id through faculty.faculty model, image widget, avatar style,
                preview image_128). List view with badge widget for role showing 3-color decorations:
                Success/Green (head), Info/Blue (coordinator), Warning/Yellow (assistant). Phone widget
                for phone field, boolean_toggle for active. Kanban view showing coordinator photo
                (image_128, 64px cover, inherited), coordinator name, department (sitemap icon), role
                card with dynamic color (success/green for head, info/blue for coordinator, warning/
                yellow for assistant, user-tie icon), faculty card (primary/blue, id-badge icon 2x),
                drives managed card (light background, calendar-check icon success/green), and contact
                card (secondary/gray, address-book icon, shows email/phone conditionally). Kanban ribbon
                "Archived" (danger/red, if not active). Ordered by name (alphabetical). Default filters:
                Active coordinators and Grouped by Role. Full chatter support for communication and
                tracking.
            </p>
        </field>
    </record>

    <!-- Menu Item -->
<!--    <menuitem id="menu_placement_coordinator"-->
<!--              name="Placement Coordinators"-->
<!--              parent="menu_placement_root"-->
<!--              action="action_placement_coordinator"-->
<!--              sequence="40"/>-->

</odoo>
